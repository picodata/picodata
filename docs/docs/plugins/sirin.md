# Sirin

–í –¥–∞–Ω–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Å–≤–µ–¥–µ–Ω–∏—è –æ Sirin, –ø–ª–∞–≥–∏–Ω–µ –¥–ª—è –°–£–ë–î Picodata.

## –í–≤–µ–¥–µ–Ω–∏–µ {: #introduction }

Picodata Sirin ‚Äî –∑–∞–∫—Ä—ã—Ç—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Picodata, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø–æ–¥–¥–µ—Ä–∂–∫—É
API Apache Cassandra (CQL –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª Cassandra v4) –ø–æ–≤–µ—Ä—Ö —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π –°–£–ë–î Picodata. Sirin
–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –¥—Ä–∞–π–≤–µ—Ä—ã –∏–∑ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã Cassandra –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Å–æ—Ö—Ä–∞–Ω—è—è
–ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å Picodata, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.

## –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å {: #licensing_and_availability }

–ú–æ–¥—É–ª—å Sirin –≤—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –≤–µ—Ä—Å–∏—é Picodata –∏ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ü–û.
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞–≥–∏–Ω—É —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –≤–∞—à–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º Picodata.

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è {: #compatibility_and_limitations }

### –¢–∞–±–ª–∏—Ü–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ {: #compatibility_table }

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å Cassandra                | –°—Ç–∞—Ç—É—Å –≤ Sirin      |
| ------------------------------------ | ------------------- |
| CQL (–æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã)             | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è   |
| Prepared statements                  | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è    |
| Named parameter markers              | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è      |
| Pagination                           | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è      |
| TTL                                  | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è      |
| Static columns                       | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è      |
| LIMIT –≤ SELECT                       | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è      |
| –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è                           | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è      |
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (cqlsh, picodata admin)  | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è      |
| Lightweight transactions (LWT)       | üü° –ß–∞—Å—Ç–∏—á–Ω–æ |
| User-defined types (UDT)             | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è |
| –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (MV) | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è |
| GROUP BY                             | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| ALTER TABLE                          | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| BATCH                                | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è {: #limitations }

- CREATE KEYSPACE –∏ DROP KEYSPACE –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏, –Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã replication_strategy
  –∏ replication_factor –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Picodata.
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ Picodata.
- Storage engine –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî vinyl. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ vinyl –≤–ª–∏—è—é—Ç –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (MV) –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
- UDT(User-Defined Type) –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö {: #data_types }

Sirin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ –∂–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –∏ Cassandra. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ
—Ç–∏–ø—ã (–æ–ø–∏—Å–∞–Ω–∏—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Cassandra):

- `ascii` ‚Äî —Å—Ç—Ä–æ–∫–∏ US-ASCII.
- `boolean` ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø (true/false).
- `blob` ‚Äî –¥–≤–æ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ hex-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏.
- `double` ‚Äî 64-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π.
- `float` ‚Äî 32-–±–∏—Ç–Ω–æ–µ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π.
- `int` ‚Äî 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.
- `bigint` ‚Äî 64-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.
- `varchar`, `text` ‚Äî UTF-8 —Å—Ç—Ä–æ–∫–∏ (—Å–∏–Ω–æ–Ω–∏–º—ã).
- `inet` ‚Äî IP-–∞–¥—Ä–µ—Å IPv4 –∏–ª–∏ IPv6.
- `smallint` ‚Äî 16-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ.
- `tinyint` ‚Äî 8-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ.
- `timeuuid` ‚Äî –≤—Ä–µ–º–µ–∑–∞–≤–∏—Å–∏–º—ã–π UUID (v1).
- `uuid` ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π UUID (v4).
- `map<k,v>` ‚Äî –∫–æ–ª–ª–µ–∫—Ü–∏—è –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏).
- `set<t>` ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏).
- `list<t>` ‚Äî —Å–ø–∏—Å–æ–∫ (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏).

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ CQL {: #supported_cql_features }

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã (DDL) {: #schema_definition }

#### CREATE KEYSPACE {: #create_keyspace }

```bnf
<create-keyspace-stmt> ::= CREATE KEYSPACE [IF NOT EXISTS] <ks-name>
                           WITH REPLICATION = <map-literal>
                           [AND DURABLE_WRITES = <boolean>]
```

- –í Sirin –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏.
- `replication_strategy` –∏ `replication_factor` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.
- `durable_writes` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –∑–∞–ø–∏—Å—å –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∂—É—Ä–Ω–∞–ª —Ñ–∏–∫—Å–∞—Ü–∏–∏.
- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω Picodata

#### CREATE TABLE {: #create_table }

```bnf
<create-table-stmt> ::= CREATE TABLE [IF NOT EXISTS] <table-name>
                        '(' <column-definitions> ',' <primary-key> ')'
                        [WITH <table-options>]
```

- `table-options` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

#### ALTER TABLE {: #alter_table }

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

#### DROP TABLE {: #drop_table }

```bnf
<drop-table-stmt> ::= DROP TABLE [<keyspace-name> '.'] <table-name>
                     [IF EXISTS]

<keyspace-name> ::= <identifier>

<table-name> ::= <identifier>
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ (DML) {: #data_operations }

#### INSERT {: #insert }

–û–ø–µ—Ä–∞—Ç–æ—Ä INSERT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (upsert) —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π
–∑–∞–ø–∏—Å–∏ –ø–æ –ø–æ–ª–Ω–æ–º—É –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞; –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—É—á–∞—é—Ç null.

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Sirin:**

- –ö–ª–∞—É–∑–∞ `USING TIMESTAMP` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- Counter-—Å—Ç–æ–ª–±—Ü—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```bnf
<insert-stmt> ::= INSERT INTO [<keyspace-name> '.'] <table-name> '(' <column-names> ')'
                  VALUES '(' <values> ')' [USING TTL <int>] [USING TIMESTAMP <int>] [IF NOT EXISTS]
```

- `keyspace_name` ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –∫–ª—é—á–µ–≤–æ–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `USE`;
- `column_list` ‚Äî –ø–µ—Ä–µ—á–µ–Ω—å –≤—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤, –≤–∫–ª—é—á–∞—è –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞;
- `value_list` ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Ä—è–¥–æ–∫ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å column_list;
- `IF NOT EXISTS` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤—Å—Ç–∞–≤–∫—É, –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. (—Å–º —Ä–∞–∑–¥–µ–ª [LWT](#lwt))

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```sql
INSERT INTO users (id, name, age)
  VALUES (uuid(), 'Alice', 30)
  USING TTL 86400
  IF NOT EXISTS;
```

#### DELETE {: #delete }

–û–ø–µ—Ä–∞—Ç–æ—Ä DELETE —É–¥–∞–ª—è–µ—Ç –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫, –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –∏–∑ —Å—Ç—Ä–æ–∫–∏.
–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –∑–∞–¥–∞—ë—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ).

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è sirin**:

- `USING TIMESTAMP` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ç–µ–∂–µ–π –≤ WHERE (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(a, b) > (1, 2)`) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bnf
<delete-stmt> ::= DELETE [<column-names>] FROM [<keyspace-name> '.'] <table-name>
                  WHERE <where-clause> [USING TIMESTAMP <int>]
```

- `column-names` ‚Äî —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª—è–µ–º—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω, –∏–∑ —Å—Ç—Ä–æ–∫–∏
  —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —ç—Ç–∏ —Å—Ç–æ–ª–±—Ü—ã. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî —É–¥–∞–ª—è–µ—Ç—Å—è –≤—Å—è —Å—Ç—Ä–æ–∫–∞.
- `WHERE` ‚Äî –∑–∞–¥–∞—ë—Ç, –∫–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–∏—Ç—å; –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –ø–æ–ª–Ω—ã–π partition key.
- `IF` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (lightweight transaction, CAS), –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ —É–¥–∞–ª—è—Ç—å
  —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è. (—Å–º —Ä–∞–∑–¥–µ–ª [LWT](#lwt))

**WHERE:**

- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Ö–æ—Ç—è –±—ã –ø–æ–ª–Ω—ã–π **partirion key**.
- –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Ç–æ—á–Ω—è—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã.
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã =, <, >, <=, >=, !=.
  IN, CONTAINS, CONTAINS KEY –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ç–µ–∂–µ–π –≤ sirin.

**–ü—Ä–∏–º–µ—Ä—ã:**

–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ –∫–ª—é—á—É:
```
DELETE FROM users WHERE id = 123;
```

–£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞:
```
DELETE age FROM users WHERE id = 123;
```

#### SELECT {: #select }

–û–ø–µ—Ä–∞—Ç–æ—Ä `SELECT` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü.

```bnf
<select-stmt> ::= SELECT [DISTINCT] <select-list>
                 FROM [<keyspace-name> '.'] <table-name>
                 [WHERE <condition-list>]
                 [USING <using-clause>]
                 [LIMIT <number>]
                 [ALLOW FILTERING]

<select-list> ::= '*' | <column-list>

<column-list> ::= <column-name> [',' <column-list>]

<condition-list> ::= <condition> [AND <condition-list>]

<condition> ::= <column-name> <comparison-op> <value>
             | <column-name> IN '(' <value-list> ')'

<comparison-op> ::= '=' | '<' | '>' | '<=' | '>=' | '!='

<value-list> ::= <value> [',' <value-list>]

<using-clause> ::= <consistency-level>
                | PAGINATION
                | TIMESTAMP <timestamp>

<consistency-level> ::= CONSISTENCY <level>

<level> ::= ONE | QUORUM | ALL | LOCAL_ONE | LOCAL_QUORUM | EACH_QUORUM | TWO | THREE

<timestamp> ::= <integer>

<allow-filtering> ::= ALLOW FILTERING
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

- `USING` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- `GROUP BY` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ç–µ–∂–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä `(column1, column2) > (1, 2)`, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- –ê–ª—å—è—Å—ã(–æ–ø–µ—Ä–∞—Ç–æ—Ä `AS`) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.

**select_clause**

`select_clause` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º –Ω–∞–±–æ—Ä–µ.
–¢–∞–∫–∂–µ –º–æ–≥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º.

```bnf
select_clause ::= selector [ AS identifier ]
                 (',' selector [ AS identifier ])*
```

–ó–¥–µ—Å—å selector –º–æ–∂–µ—Ç –±—ã—Ç—å:

- –∏–º–µ–Ω–µ–º —Å—Ç–æ–ª–±—Ü–∞ —Ç–∞–±–ª–∏—Ü—ã;
- —Ç–µ—Ä–º–∏–Ω–æ–º (term);
- –∫–∞—Å—Ç–∏–Ω–≥–æ–º: `CAST(selector AS cql_type)`, **–Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**;
- –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏: `function_name(selector, ...)`, **–Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**;
- —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º–æ–π `COUNT(*)`, **–Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**.

**Aliases (–ø—Å–µ–≤–¥–æ–Ω–∏–º—ã)**

–ö–∞–∂–¥—ã–π –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é AS. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∏–º—è —Å—Ç–æ–ª–±—Ü–∞
–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç –∑–∞–¥–∞–Ω–æ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º, –∞ –Ω–µ –∏—Å—Ö–æ–¥–Ω—ã–º –∏–º–µ–Ω–µ–º.

**WHERE clause**

–û–ø–µ—Ä–∞—Ç–æ—Ä WHERE –∑–∞–¥–∞—ë—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å—Ç—Ä–æ–∫:
```bnf
where_clause ::= relation ( AND relation )*
relation ::= column_name operator term
```
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: =, <, >, <=, >=, !=, IN, CONTAINS, CONTAINS KEY.

–û–¥–Ω–∞–∫–æ:

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ—Ä—Ç–µ–∂–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, (column1, column2) > (1, 2)) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ sirin.

**ORDER BY**

–û–ø–µ—Ä–∞—Ç–æ—Ä ORDER BY –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫:
```bnf
ordering_clause ::= column_name [ASC | DESC] (',' column_name [ASC | DESC])*
```

–ü–æ—Ä—è–¥–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–µ–º–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü–µ.

**LIMIT –∏ PER PARTITION LIMIT**

- `LIMIT` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –æ–±—â–µ–µ —á–∏—Å–ª–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫.
- `PER PARTITION LIMIT` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫ –≤ –∫–∞–∂–¥–æ–º —Ä–∞–∑–¥–µ–ª–µ.

**ALLOW FILTERING**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é sirin, –∫–∞–∫ –∏ cassandra, –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
–≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤. –ß—Ç–æ–±—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø—Ä–æ—Å–∞–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
`ALLOW FILTERING`.

–ü—Ä–∏–º–µ—Ä –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å —É—á—ë—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:
```sql
SELECT id, name
FROM users
WHERE age >= 18
ORDER BY name ASC
LIMIT 100
ALLOW FILTERING;
```

#### LWT (Lightweight transactions) {: #lwt }

Sirin —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º LWT. –¢–∞–∫ –∫–∞–∫ –∑–∞–ø–∏—Å—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –Ω–∞–±–æ—Ä —Ä–µ–ø–ª–∏–∫, –∞ —Å–∞–º–∏
—Ä–µ–ø–ª–∏–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π, —Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É–∑–ª–µ, –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º –∑–∞–ø—Ä–æ—Å.

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `IF NOT EXISTS` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ç–∏–ø–∞ `INSERT`. –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏
—É—Å–ª–æ–≤–∏—è, –Ω–∞ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â—ë–Ω –æ—Ç–≤–µ—Ç –≤–∏–¥–∞
```
[applied] = false
```
–≥–¥–µ `false` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –ª–æ–∂–Ω–æ –∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ `true`
–±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ –≤ —Å–ª—É—á–∞–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è(–≤—Å—Ç–∞–≤–∫–∏) –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä:
```sql
INSERT INTO tbl (key, value) VALUES ('key1', 0e568df0-7eb1-11f0-1cef-2593d20a0950) IF NOT EXISTS;
```

–í–µ—Ä–Ω—ë—Ç:
```
 [applied]
-----------
      True
```

### TTL –∏ –º–µ—Ö–∞–Ω–∏–∑–º —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ {: #ttl_and_expiration }

Sirin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç TTL –¥–ª—è —Å—Ç—Ä–æ–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫:
```sql
INSERT INTO users (id, name) VALUES (1, 'Ivan') USING TTL 86400;
```

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–ø–∏—Å–∏, —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –∏—Å—Ç—ë–∫.
–§–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ: —Ñ–æ–Ω–æ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ö–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—ã
–∏ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∏—Å—Ç—ë–∫—à–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ö–æ—Ç—è –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É
–ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏, –∏—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–µ –≤–ª–∏—è—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è.

### –§—É–Ω–∫—Ü–∏–∏ {: #functions }

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –±–∞–∑–æ–≤—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º CQL, –º–æ–¥—É–ª—å Sirin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Cassandra.
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∑–∞–ø—Ä–æ—Å–∞.

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π {: #supported_functions }

**–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

- `abs()` ‚Äî –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- `ceil()`, `floor()` ‚Äî –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑
- `exp()`, `ln()`, `log()`, `log10()`
- `pow(base, exponent)`
- `round()`
- `sqrt()`

**–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏:**

- `blobAsText()`, `textAsBlob()`
- `uuidAsText()`
- `toTimestamp()`, `toDate()`
- `minTimeuuid()`, `maxTimeuuid()`
- `substr()`
- `upper()`, `lower()`

**–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏:**

- `blobAsText()`, `textAsBlob()`
- `uuidAsText()`
- `toTimestamp()`, `toDate()`
- `minTimeuuid()`, `maxTimeuuid()`
- `substr()`
- `upper()`, `lower()`

**–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏:**

- `size()` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (map, set, list).
- `element_at(collection, index)` ‚Äî —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∏–Ω–¥–µ–∫—Å—É (–¥–ª—è list).

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è {: #functions_examples }

```sql
-- –ü—Ä–∏–º–µ—Ä 1. –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
SELECT abs(-15), sqrt(16), pow(2, 8) FROM ks1.tbl1 LIMIT 1;

-- –ü—Ä–∏–º–µ—Ä 2. –§—É–Ω–∫—Ü–∏–∏ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
SELECT upper(name), substr(description, 1, 10) FROM ks1.tbl2;

-- –ü—Ä–∏–º–µ—Ä 3. –†–∞–±–æ—Ç–∞ —Å UUID –∏ –≤—Ä–µ–º–µ–Ω–µ–º
SELECT now(), currentTimestamp(), dateOf(now()) FROM ks1.tbl3;

-- –ü—Ä–∏–º–µ—Ä 4. –†–∞–±–æ—Ç–∞ —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏
SELECT size(tags), element_at(tags, 0) FROM ks1.tbl4;
```

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è {: #functions_limitations }

- –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (`count`, `sum`, `avg`, `min`, `max`) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (UDF) –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞–≥—Ä–µ–≥–∞—Ç—ã (UDA) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.
- –¢—Ä–∏–≥–≥–µ—Ä—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è {: #usage_examples }

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã {: #create_table_example }

```sql
CREATE TABLE users (
    id uuid PRIMARY KEY,
    name text,
    age int,
    country text
);
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö {: #insert_data_example }

```sql
INSERT INTO users (id, name, age, country) VALUES (2f0cff20-967f-4dfa-a8a1-6140b5fd9255, 'Ivan', 32, 'Russia');
```

### –í—ã–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å LIMIT {: #select_with_limit_example }

```sql
SELECT id, name FROM users LIMIT 10;
```

### TTL {: #ttl_example }

```sql
INSERT INTO sessions (id, user_id) VALUES (uuid(), 42) USING TTL 600;
```

## –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –¥—Ä–∞–π–≤–µ—Ä—ã {: #protocols_and_drivers }

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª Cassandra Native Protocol v4.
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ Apache Cassandra –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤:
  - Java ‚Äî [DataStax Java Driver](https://github.com/datastax/java-driver)
  - Python ‚Äî [Python Cassandra Driver](https://github.com/datastax/python-driver)
  - Go ‚Äî [gocql](https://github.com/gocql/gocql)
  - Node.js ‚Äî [cassandra-driver for Node.js](https://github.com/datastax/nodejs-driver)
  - Rust - [ScyllaDB Rust Driver](https://github.com/scylladb/scylla-rust-driver)

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ, —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ  {: #deployment_operations_recovery }

–í—Å–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ Picodata.
–°–º. —Ä–∞–∑–¥–µ–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Picodata:
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤](https://docs.picodata.io/picodata/stable/overview/glossary/#plugin)
- [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞](https://docs.picodata.io/picodata/stable/#run_deploy)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è](https://docs.picodata.io/picodata/stable/admin/monitoring/)
- [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ](https://docs.picodata.io/picodata/stable/admin/backup/)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ {: #plugin_configuration }

```yaml
router:
  addr: 0.0.0.0:9042        # –ê–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª cassandra
  max_clients: 100          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ —É–∑–µ–ª
  peers_cleaner:
    interval_secs: 15       # –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑ —Ç–∞–±–ª–∏—Ü
                            # peers –∏ peers_v2 —É–¥–∞–ª—è—é—Ç—Å—è –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω—ã–µ —É–∑–ª—ã.

storage:
  ttl:
    timeout: 10             # –ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä–∞—è
                            # —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ —Å –∏—Å—Ç—ë–∫—à–∏–º —Å—Ä–æ–∫–æ–º –∂–∏–∑–Ω–∏
    batch_size: 100         # –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –Ω–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
```
